(function(k){function d(c,a,f){this.c=c;this.a=a||[];this.b=f||[]}var g={},b=d.prototype;b.toArray=function(){for(var c=[],a=0,f=this.c.length;a<f;a++){for(var b=this.c[a],e=0,h=this.a.length;e<h&&(b=this.a[e](b),b!=g);e++);b!==g&&c.push(b)}a=0;for(f=this.b.length;a<f;a++)c=this.b[a](c);return c};b.forEach=function(c){for(var a=this.toArray(),b=0,d=a.length;b<d;b++)c(a[b])};b.sum=function(){for(var c=0,a=this.toArray(),b=a.length;b--;)c+=a[b];return c};b.count=function(){return this.toArray().length};b.findFirst=function(){var c= this.toArray();return 0<c.length?c[0]:null};b.map=function(c){this.a.push(function(a){return c.call(a,a)});return this};b.filter=function(c){this.a.push(function(a){return c.call(a,a)?a:g});return this};b.sort=function(c){this.b.push(function(a){return a.sort(c)});return this};b.distinct=function(){this.a.push(function(c){var a=[],b=0,d=c.length;a:for(;b<d;b++){for(var e=c[b],h=0,g=a.length;h<g;h++)if(a[h]==e)continue a;a.push(e)}return a});return this};b.clone=function(){return new d(this.c.slice(0),this.a.slice(0), this.b.slice(0))};k.Stream=d})(this);